// <copyright file="SubscriptionsController.cs" company="APIMatic">
// PaypalServerSdk.Standard
//
// This file was automatically generated by APIMATIC v3.0 ( https://www.apimatic.io ).
// </copyright>
using System;
using System.Collections.Generic;
using System.Dynamic;
using System.Globalization;
using System.IO;
using System.Linq;
using System.Text;
using System.Threading;
using System.Threading.Tasks;
using APIMatic.Core;
using APIMatic.Core.Types;
using APIMatic.Core.Utilities;
using APIMatic.Core.Utilities.Date.Xml;
using Newtonsoft.Json.Converters;
using PaypalServerSdk.Standard;
using PaypalServerSdk.Standard.Exceptions;
using PaypalServerSdk.Standard.Http.Client;
using PaypalServerSdk.Standard.Http.Response;
using PaypalServerSdk.Standard.Utilities;
using System.Net.Http;

namespace PaypalServerSdk.Standard.Controllers
{
    /// <summary>
    /// SubscriptionsController.
    /// </summary>
    public class SubscriptionsController : BaseController
    {
        /// <summary>
        /// Initializes a new instance of the <see cref="SubscriptionsController"/> class.
        /// </summary>
        internal SubscriptionsController(GlobalConfiguration globalConfiguration) : base(globalConfiguration) { }

        /// <summary>
        /// Creates a plan that defines pricing and billing cycle details for subscriptions.
        /// </summary>
        /// <param name="input">Object containing request parameters.</param>
        /// <returns>Returns the ApiResponse of Models.BillingPlan response from the API call.</returns>
        public ApiResponse<Models.BillingPlan> CreateBillingPlan(
                Models.CreateBillingPlanInput input)
            => CoreHelper.RunTask(CreateBillingPlanAsync(input));

        /// <summary>
        /// Creates a plan that defines pricing and billing cycle details for subscriptions.
        /// </summary>
        /// <param name="input">Object containing request parameters.</param>
        /// <param name="cancellationToken"> cancellationToken. </param>
        /// <returns>Returns the ApiResponse of Models.BillingPlan response from the API call.</returns>
        public async Task<ApiResponse<Models.BillingPlan>> CreateBillingPlanAsync(
                Models.CreateBillingPlanInput input,
                CancellationToken cancellationToken = default)
            => await CreateApiCall<Models.BillingPlan>()
              .RequestBuilder(_requestBuilder => _requestBuilder
                  .Setup(HttpMethod.Post, "/v1/billing/plans")
                  .WithAuth("Oauth2")
                  .Parameters(_parameters => _parameters
                      .Body(_bodyParameter => _bodyParameter.Setup(input.Body))
                      .Header(_header => _header.Setup("Content-Type", "application/json"))
                      .Header(_header => _header.Setup("Prefer", input.Prefer))
                      .Header(_header => _header.Setup("PayPal-Request-Id", input.PaypalRequestId))))
              .ResponseHandler(_responseHandler => _responseHandler
                  .ErrorCase("400", CreateErrorCase("Bad Request. Request is not well-formed, syntactically incorrect, or violates schema.", (_reason, _context) => new SubscriptionErrorException(_reason, _context)))
                  .ErrorCase("401", CreateErrorCase("Authentication failed due to missing authorization header, or invalid authentication credentials.", (_reason, _context) => new SubscriptionErrorException(_reason, _context)))
                  .ErrorCase("403", CreateErrorCase("Authorization failed due to insufficient permissions.", (_reason, _context) => new SubscriptionErrorException(_reason, _context)))
                  .ErrorCase("422", CreateErrorCase("The requested action could not be performed, semantically incorrect, or failed business validation.", (_reason, _context) => new SubscriptionErrorException(_reason, _context)))
                  .ErrorCase("500", CreateErrorCase("An internal server error has occurred.", (_reason, _context) => new SubscriptionErrorException(_reason, _context)))
                  .ErrorCase("0", CreateErrorCase("The error response.", (_reason, _context) => new SubscriptionErrorException(_reason, _context))))
              .ExecuteAsync(cancellationToken).ConfigureAwait(false);

        /// <summary>
        /// Lists billing plans.
        /// </summary>
        /// <param name="input">Object containing request parameters.</param>
        /// <returns>Returns the ApiResponse of Models.PlanCollection response from the API call.</returns>
        public ApiResponse<Models.PlanCollection> ListBillingPlans(
                Models.ListBillingPlansInput input)
            => CoreHelper.RunTask(ListBillingPlansAsync(input));

        /// <summary>
        /// Lists billing plans.
        /// </summary>
        /// <param name="input">Object containing request parameters.</param>
        /// <param name="cancellationToken"> cancellationToken. </param>
        /// <returns>Returns the ApiResponse of Models.PlanCollection response from the API call.</returns>
        public async Task<ApiResponse<Models.PlanCollection>> ListBillingPlansAsync(
                Models.ListBillingPlansInput input,
                CancellationToken cancellationToken = default)
            => await CreateApiCall<Models.PlanCollection>()
              .RequestBuilder(_requestBuilder => _requestBuilder
                  .Setup(HttpMethod.Get, "/v1/billing/plans")
                  .WithAuth("Oauth2")
                  .Parameters(_parameters => _parameters
                      .Header(_header => _header.Setup("Prefer", input.Prefer))
                      .Query(_query => _query.Setup("product_id", input.ProductId))
                      .Query(_query => _query.Setup("page_size", input.PageSize))
                      .Query(_query => _query.Setup("page", input.Page))
                      .Query(_query => _query.Setup("total_required", input.TotalRequired))))
              .ResponseHandler(_responseHandler => _responseHandler
                  .ErrorCase("400", CreateErrorCase("Request is not well-formed, syntactically incorrect, or violates schema.", (_reason, _context) => new SubscriptionErrorException(_reason, _context)))
                  .ErrorCase("401", CreateErrorCase("Authentication failed due to missing authorization header, or invalid authentication credentials.", (_reason, _context) => new SubscriptionErrorException(_reason, _context)))
                  .ErrorCase("403", CreateErrorCase("Authorization failed due to insufficient permissions.", (_reason, _context) => new SubscriptionErrorException(_reason, _context)))
                  .ErrorCase("404", CreateErrorCase("The specified resource does not exist.", (_reason, _context) => new SubscriptionErrorException(_reason, _context)))
                  .ErrorCase("500", CreateErrorCase("An internal server error has occurred.", (_reason, _context) => new SubscriptionErrorException(_reason, _context)))
                  .ErrorCase("0", CreateErrorCase("The error response.", (_reason, _context) => new SubscriptionErrorException(_reason, _context))))
              .ExecuteAsync(cancellationToken).ConfigureAwait(false);

        /// <summary>
        /// Shows details for a plan, by ID.
        /// </summary>
        /// <param name="id">Required parameter: The ID of the plan..</param>
        /// <returns>Returns the ApiResponse of Models.BillingPlan response from the API call.</returns>
        public ApiResponse<Models.BillingPlan> GetBillingPlan(
                string id)
            => CoreHelper.RunTask(GetBillingPlanAsync(id));

        /// <summary>
        /// Shows details for a plan, by ID.
        /// </summary>
        /// <param name="id">Required parameter: The ID of the plan..</param>
        /// <param name="cancellationToken"> cancellationToken. </param>
        /// <returns>Returns the ApiResponse of Models.BillingPlan response from the API call.</returns>
        public async Task<ApiResponse<Models.BillingPlan>> GetBillingPlanAsync(
                string id,
                CancellationToken cancellationToken = default)
            => await CreateApiCall<Models.BillingPlan>()
              .RequestBuilder(_requestBuilder => _requestBuilder
                  .Setup(HttpMethod.Get, "/v1/billing/plans/{id}")
                  .WithAuth("Oauth2")
                  .Parameters(_parameters => _parameters
                      .Template(_template => _template.Setup("id", id))))
              .ResponseHandler(_responseHandler => _responseHandler
                  .ErrorCase("401", CreateErrorCase("Authentication failed due to missing authorization header, or invalid authentication credentials.", (_reason, _context) => new SubscriptionErrorException(_reason, _context)))
                  .ErrorCase("403", CreateErrorCase("Authorization failed due to insufficient permissions.", (_reason, _context) => new SubscriptionErrorException(_reason, _context)))
                  .ErrorCase("404", CreateErrorCase("The specified resource does not exist.", (_reason, _context) => new SubscriptionErrorException(_reason, _context)))
                  .ErrorCase("500", CreateErrorCase("An internal server error has occurred.", (_reason, _context) => new SubscriptionErrorException(_reason, _context)))
                  .ErrorCase("0", CreateErrorCase("The error response.", (_reason, _context) => new SubscriptionErrorException(_reason, _context))))
              .ExecuteAsync(cancellationToken).ConfigureAwait(false);

        /// <summary>
        /// Updates a plan with the `CREATED` or `ACTIVE` status. For an `INACTIVE` plan, you can make only status updates. You can patch these attributes and objects: Attribute or object Operations description replace payment_preferences.auto_bill_outstanding replace taxes.percentage replace payment_preferences.payment_failure_threshold replace payment_preferences.setup_fee replace payment_preferences.setup_fee_failure_action replace name replace.
        /// </summary>
        /// <param name="input">Object containing request parameters.</param>
        public void PatchBillingPlan(
                Models.PatchBillingPlanInput input)
            => CoreHelper.RunVoidTask(PatchBillingPlanAsync(input));

        /// <summary>
        /// Updates a plan with the `CREATED` or `ACTIVE` status. For an `INACTIVE` plan, you can make only status updates. You can patch these attributes and objects: Attribute or object Operations description replace payment_preferences.auto_bill_outstanding replace taxes.percentage replace payment_preferences.payment_failure_threshold replace payment_preferences.setup_fee replace payment_preferences.setup_fee_failure_action replace name replace.
        /// </summary>
        /// <param name="input">Object containing request parameters.</param>
        /// <param name="cancellationToken"> cancellationToken. </param>
        /// <returns>Returns the void response from the API call.</returns>
        public async Task PatchBillingPlanAsync(
                Models.PatchBillingPlanInput input,
                CancellationToken cancellationToken = default)
            => await CreateApiCall<VoidType>()
              .RequestBuilder(_requestBuilder => _requestBuilder
                  .Setup(new HttpMethod("PATCH"), "/v1/billing/plans/{id}")
                  .WithAuth("Oauth2")
                  .Parameters(_parameters => _parameters
                      .Body(_bodyParameter => _bodyParameter.Setup(input.Body))
                      .Template(_template => _template.Setup("id", input.Id))
                      .Header(_header => _header.Setup("Content-Type", "application/json"))))
              .ResponseHandler(_responseHandler => _responseHandler
                  .ErrorCase("400", CreateErrorCase("Request is not well-formed, syntactically incorrect, or violates schema.", (_reason, _context) => new SubscriptionErrorException(_reason, _context)))
                  .ErrorCase("401", CreateErrorCase("Authentication failed due to missing authorization header, or invalid authentication credentials.", (_reason, _context) => new SubscriptionErrorException(_reason, _context)))
                  .ErrorCase("403", CreateErrorCase("Authorization failed due to insufficient permissions.", (_reason, _context) => new SubscriptionErrorException(_reason, _context)))
                  .ErrorCase("404", CreateErrorCase("The specified resource does not exist.", (_reason, _context) => new SubscriptionErrorException(_reason, _context)))
                  .ErrorCase("422", CreateErrorCase("The requested action could not be performed, semantically incorrect, or failed business validation.", (_reason, _context) => new SubscriptionErrorException(_reason, _context)))
                  .ErrorCase("500", CreateErrorCase("An internal server error has occurred.", (_reason, _context) => new SubscriptionErrorException(_reason, _context)))
                  .ErrorCase("0", CreateErrorCase("The error response.", (_reason, _context) => new SubscriptionErrorException(_reason, _context))))
              .ExecuteAsync(cancellationToken).ConfigureAwait(false);

        /// <summary>
        /// Activates a plan, by ID.
        /// </summary>
        /// <param name="id">Required parameter: The ID of the plan..</param>
        public void ActivateBillingPlan(
                string id)
            => CoreHelper.RunVoidTask(ActivateBillingPlanAsync(id));

        /// <summary>
        /// Activates a plan, by ID.
        /// </summary>
        /// <param name="id">Required parameter: The ID of the plan..</param>
        /// <param name="cancellationToken"> cancellationToken. </param>
        /// <returns>Returns the void response from the API call.</returns>
        public async Task ActivateBillingPlanAsync(
                string id,
                CancellationToken cancellationToken = default)
            => await CreateApiCall<VoidType>()
              .RequestBuilder(_requestBuilder => _requestBuilder
                  .Setup(HttpMethod.Post, "/v1/billing/plans/{id}/activate")
                  .WithAuth("Oauth2")
                  .Parameters(_parameters => _parameters
                      .Template(_template => _template.Setup("id", id))))
              .ResponseHandler(_responseHandler => _responseHandler
                  .ErrorCase("401", CreateErrorCase("Authentication failed due to missing authorization header, or invalid authentication credentials.", (_reason, _context) => new SubscriptionErrorException(_reason, _context)))
                  .ErrorCase("403", CreateErrorCase("Authorization failed due to insufficient permissions.", (_reason, _context) => new SubscriptionErrorException(_reason, _context)))
                  .ErrorCase("404", CreateErrorCase("The specified resource does not exist.", (_reason, _context) => new SubscriptionErrorException(_reason, _context)))
                  .ErrorCase("422", CreateErrorCase("The requested action could not be performed, semantically incorrect, or failed business validation.", (_reason, _context) => new SubscriptionErrorException(_reason, _context)))
                  .ErrorCase("500", CreateErrorCase("An internal server error has occurred.", (_reason, _context) => new SubscriptionErrorException(_reason, _context)))
                  .ErrorCase("0", CreateErrorCase("The error response.", (_reason, _context) => new SubscriptionErrorException(_reason, _context))))
              .ExecuteAsync(cancellationToken).ConfigureAwait(false);

        /// <summary>
        /// Deactivates a plan, by ID.
        /// </summary>
        /// <param name="id">Required parameter: The ID of the plan..</param>
        public void DeactivateBillingPlan(
                string id)
            => CoreHelper.RunVoidTask(DeactivateBillingPlanAsync(id));

        /// <summary>
        /// Deactivates a plan, by ID.
        /// </summary>
        /// <param name="id">Required parameter: The ID of the plan..</param>
        /// <param name="cancellationToken"> cancellationToken. </param>
        /// <returns>Returns the void response from the API call.</returns>
        public async Task DeactivateBillingPlanAsync(
                string id,
                CancellationToken cancellationToken = default)
            => await CreateApiCall<VoidType>()
              .RequestBuilder(_requestBuilder => _requestBuilder
                  .Setup(HttpMethod.Post, "/v1/billing/plans/{id}/deactivate")
                  .WithAuth("Oauth2")
                  .Parameters(_parameters => _parameters
                      .Template(_template => _template.Setup("id", id))))
              .ResponseHandler(_responseHandler => _responseHandler
                  .ErrorCase("401", CreateErrorCase("Authentication failed due to missing authorization header, or invalid authentication credentials.", (_reason, _context) => new SubscriptionErrorException(_reason, _context)))
                  .ErrorCase("403", CreateErrorCase("Authorization failed due to insufficient permissions.", (_reason, _context) => new SubscriptionErrorException(_reason, _context)))
                  .ErrorCase("404", CreateErrorCase("The specified resource does not exist.", (_reason, _context) => new SubscriptionErrorException(_reason, _context)))
                  .ErrorCase("422", CreateErrorCase("The requested action could not be performed, semantically incorrect, or failed business validation.", (_reason, _context) => new SubscriptionErrorException(_reason, _context)))
                  .ErrorCase("500", CreateErrorCase("An internal server error has occurred.", (_reason, _context) => new SubscriptionErrorException(_reason, _context)))
                  .ErrorCase("0", CreateErrorCase("The error response.", (_reason, _context) => new SubscriptionErrorException(_reason, _context))))
              .ExecuteAsync(cancellationToken).ConfigureAwait(false);

        /// <summary>
        /// Updates pricing for a plan. For example, you can update a regular billing cycle from $5 per month to $7 per month.
        /// </summary>
        /// <param name="input">Object containing request parameters.</param>
        public void UpdateBillingPlanPricingSchemes(
                Models.UpdateBillingPlanPricingSchemesInput input)
            => CoreHelper.RunVoidTask(UpdateBillingPlanPricingSchemesAsync(input));

        /// <summary>
        /// Updates pricing for a plan. For example, you can update a regular billing cycle from $5 per month to $7 per month.
        /// </summary>
        /// <param name="input">Object containing request parameters.</param>
        /// <param name="cancellationToken"> cancellationToken. </param>
        /// <returns>Returns the void response from the API call.</returns>
        public async Task UpdateBillingPlanPricingSchemesAsync(
                Models.UpdateBillingPlanPricingSchemesInput input,
                CancellationToken cancellationToken = default)
            => await CreateApiCall<VoidType>()
              .RequestBuilder(_requestBuilder => _requestBuilder
                  .Setup(HttpMethod.Post, "/v1/billing/plans/{id}/update-pricing-schemes")
                  .WithAuth("Oauth2")
                  .Parameters(_parameters => _parameters
                      .Body(_bodyParameter => _bodyParameter.Setup(input.Body))
                      .Template(_template => _template.Setup("id", input.Id))
                      .Header(_header => _header.Setup("Content-Type", "application/json"))))
              .ResponseHandler(_responseHandler => _responseHandler
                  .ErrorCase("400", CreateErrorCase("Bad Request. Request is not well-formed, syntactically incorrect, or violates schema.", (_reason, _context) => new SubscriptionErrorException(_reason, _context)))
                  .ErrorCase("401", CreateErrorCase("Authentication failed due to missing authorization header, or invalid authentication credentials.", (_reason, _context) => new SubscriptionErrorException(_reason, _context)))
                  .ErrorCase("403", CreateErrorCase("Authorization failed due to insufficient permissions.", (_reason, _context) => new SubscriptionErrorException(_reason, _context)))
                  .ErrorCase("404", CreateErrorCase("The specified resource does not exist.", (_reason, _context) => new SubscriptionErrorException(_reason, _context)))
                  .ErrorCase("422", CreateErrorCase("The requested action could not be performed, semantically incorrect, or failed business validation.", (_reason, _context) => new SubscriptionErrorException(_reason, _context)))
                  .ErrorCase("500", CreateErrorCase("An internal server error has occurred.", (_reason, _context) => new SubscriptionErrorException(_reason, _context)))
                  .ErrorCase("0", CreateErrorCase("The error response.", (_reason, _context) => new SubscriptionErrorException(_reason, _context))))
              .ExecuteAsync(cancellationToken).ConfigureAwait(false);

        /// <summary>
        /// Creates a subscription.
        /// </summary>
        /// <param name="input">Object containing request parameters.</param>
        /// <returns>Returns the ApiResponse of Models.Subscription response from the API call.</returns>
        public ApiResponse<Models.Subscription> CreateSubscription(
                Models.CreateSubscriptionInput input)
            => CoreHelper.RunTask(CreateSubscriptionAsync(input));

        /// <summary>
        /// Creates a subscription.
        /// </summary>
        /// <param name="input">Object containing request parameters.</param>
        /// <param name="cancellationToken"> cancellationToken. </param>
        /// <returns>Returns the ApiResponse of Models.Subscription response from the API call.</returns>
        public async Task<ApiResponse<Models.Subscription>> CreateSubscriptionAsync(
                Models.CreateSubscriptionInput input,
                CancellationToken cancellationToken = default)
            => await CreateApiCall<Models.Subscription>()
              .RequestBuilder(_requestBuilder => _requestBuilder
                  .Setup(HttpMethod.Post, "/v1/billing/subscriptions")
                  .WithAuth("Oauth2")
                  .Parameters(_parameters => _parameters
                      .Body(_bodyParameter => _bodyParameter.Setup(input.Body))
                      .Header(_header => _header.Setup("Content-Type", "application/json"))
                      .Header(_header => _header.Setup("Prefer", input.Prefer))
                      .Header(_header => _header.Setup("PayPal-Request-Id", input.PaypalRequestId))
                      .Header(_header => _header.Setup("PayPal-Client-Metadata-Id", input.PaypalClientMetadataId))))
              .ResponseHandler(_responseHandler => _responseHandler
                  .ErrorCase("400", CreateErrorCase("Bad Request. Request is not well-formed, syntactically incorrect, or violates schema.", (_reason, _context) => new SubscriptionErrorException(_reason, _context)))
                  .ErrorCase("401", CreateErrorCase("Authentication failed due to missing authorization header, or invalid authentication credentials.", (_reason, _context) => new SubscriptionErrorException(_reason, _context)))
                  .ErrorCase("403", CreateErrorCase("Authorization failed due to insufficient permissions.", (_reason, _context) => new SubscriptionErrorException(_reason, _context)))
                  .ErrorCase("422", CreateErrorCase("The requested action could not be performed, semantically incorrect, or failed business validation.", (_reason, _context) => new SubscriptionErrorException(_reason, _context)))
                  .ErrorCase("500", CreateErrorCase("An internal server error has occurred.", (_reason, _context) => new SubscriptionErrorException(_reason, _context)))
                  .ErrorCase("0", CreateErrorCase("The error response.", (_reason, _context) => new SubscriptionErrorException(_reason, _context))))
              .ExecuteAsync(cancellationToken).ConfigureAwait(false);

        /// <summary>
        /// List all subscriptions for merchant account.
        /// </summary>
        /// <param name="input">Object containing request parameters.</param>
        /// <returns>Returns the ApiResponse of Models.SubscriptionCollection response from the API call.</returns>
        public ApiResponse<Models.SubscriptionCollection> ListSubscriptions(
                Models.ListSubscriptionsInput input)
            => CoreHelper.RunTask(ListSubscriptionsAsync(input));

        /// <summary>
        /// List all subscriptions for merchant account.
        /// </summary>
        /// <param name="input">Object containing request parameters.</param>
        /// <param name="cancellationToken"> cancellationToken. </param>
        /// <returns>Returns the ApiResponse of Models.SubscriptionCollection response from the API call.</returns>
        public async Task<ApiResponse<Models.SubscriptionCollection>> ListSubscriptionsAsync(
                Models.ListSubscriptionsInput input,
                CancellationToken cancellationToken = default)
            => await CreateApiCall<Models.SubscriptionCollection>()
              .RequestBuilder(_requestBuilder => _requestBuilder
                  .Setup(HttpMethod.Get, "/v1/billing/subscriptions")
                  .WithAuth("Oauth2")
                  .Parameters(_parameters => _parameters
                      .Query(_query => _query.Setup("plan_ids", input.PlanIds))
                      .Query(_query => _query.Setup("statuses", input.Statuses))
                      .Query(_query => _query.Setup("created_after", input.CreatedAfter))
                      .Query(_query => _query.Setup("created_before", input.CreatedBefore))
                      .Query(_query => _query.Setup("status_updated_before", input.StatusUpdatedBefore))
                      .Query(_query => _query.Setup("status_updated_after", input.StatusUpdatedAfter))
                      .Query(_query => _query.Setup("filter", input.Filter))
                      .Query(_query => _query.Setup("page_size", input.PageSize))
                      .Query(_query => _query.Setup("page", input.Page))
                      .Query(_query => _query.Setup("customer_ids", input.CustomerIds))))
              .ResponseHandler(_responseHandler => _responseHandler
                  .ErrorCase("400", CreateErrorCase("Request is not well-formed, syntactically incorrect, or violates schema.", (_reason, _context) => new SubscriptionErrorException(_reason, _context)))
                  .ErrorCase("401", CreateErrorCase("Authentication failed due to missing authorization header, or invalid authentication credentials.", (_reason, _context) => new SubscriptionErrorException(_reason, _context)))
                  .ErrorCase("403", CreateErrorCase("Authorization failed due to insufficient permissions.", (_reason, _context) => new SubscriptionErrorException(_reason, _context)))
                  .ErrorCase("500", CreateErrorCase("An internal server error has occurred.", (_reason, _context) => new SubscriptionErrorException(_reason, _context)))
                  .ErrorCase("0", CreateErrorCase("The error response.", (_reason, _context) => new SubscriptionErrorException(_reason, _context))))
              .ExecuteAsync(cancellationToken).ConfigureAwait(false);

        /// <summary>
        /// Shows details for a subscription, by ID.
        /// </summary>
        /// <param name="input">Object containing request parameters.</param>
        /// <returns>Returns the ApiResponse of Models.Subscription response from the API call.</returns>
        public ApiResponse<Models.Subscription> GetSubscription(
                Models.GetSubscriptionInput input)
            => CoreHelper.RunTask(GetSubscriptionAsync(input));

        /// <summary>
        /// Shows details for a subscription, by ID.
        /// </summary>
        /// <param name="input">Object containing request parameters.</param>
        /// <param name="cancellationToken"> cancellationToken. </param>
        /// <returns>Returns the ApiResponse of Models.Subscription response from the API call.</returns>
        public async Task<ApiResponse<Models.Subscription>> GetSubscriptionAsync(
                Models.GetSubscriptionInput input,
                CancellationToken cancellationToken = default)
            => await CreateApiCall<Models.Subscription>()
              .RequestBuilder(_requestBuilder => _requestBuilder
                  .Setup(HttpMethod.Get, "/v1/billing/subscriptions/{id}")
                  .WithAuth("Oauth2")
                  .Parameters(_parameters => _parameters
                      .Template(_template => _template.Setup("id", input.Id))
                      .Query(_query => _query.Setup("fields", input.Fields))))
              .ResponseHandler(_responseHandler => _responseHandler
                  .ErrorCase("401", CreateErrorCase("Authentication failed due to missing authorization header, or invalid authentication credentials.", (_reason, _context) => new SubscriptionErrorException(_reason, _context)))
                  .ErrorCase("403", CreateErrorCase("Authorization failed due to insufficient permissions.", (_reason, _context) => new SubscriptionErrorException(_reason, _context)))
                  .ErrorCase("404", CreateErrorCase("The specified resource does not exist.", (_reason, _context) => new SubscriptionErrorException(_reason, _context)))
                  .ErrorCase("500", CreateErrorCase("An internal server error has occurred.", (_reason, _context) => new SubscriptionErrorException(_reason, _context)))
                  .ErrorCase("0", CreateErrorCase("The error response.", (_reason, _context) => new SubscriptionErrorException(_reason, _context))))
              .ExecuteAsync(cancellationToken).ConfigureAwait(false);

        /// <summary>
        /// Updates a subscription which could be in ACTIVE or SUSPENDED status. You can override plan level default attributes by providing customised values for plan path in the patch request. You cannot update attributes that have already completed (Example - trial cycles can’t be updated if completed). Once overridden, changes to plan resource will not impact subscription. Any price update will not impact billing cycles within next 10 days (Applicable only for subscriptions funded by PayPal account). Following are the fields eligible for patch. Attribute or object Operations billing_info.outstanding_balance replace custom_id add,replace plan.billing_cycles[@sequence==n]. pricing_scheme.fixed_price add,replace plan.billing_cycles[@sequence==n]. pricing_scheme.tiers replace plan.billing_cycles[@sequence==n]. total_cycles replace plan.payment_preferences. auto_bill_outstanding replace plan.payment_preferences. payment_failure_threshold replace plan.taxes.inclusive add,replace plan.taxes.percentage add,replace shipping_amount add,replace start_time replace subscriber.shipping_address add,replace subscriber.payment_source (for subscriptions funded by card payments) replace.
        /// </summary>
        /// <param name="input">Object containing request parameters.</param>
        public void PatchSubscription(
                Models.PatchSubscriptionInput input)
            => CoreHelper.RunVoidTask(PatchSubscriptionAsync(input));

        /// <summary>
        /// Updates a subscription which could be in ACTIVE or SUSPENDED status. You can override plan level default attributes by providing customised values for plan path in the patch request. You cannot update attributes that have already completed (Example - trial cycles can’t be updated if completed). Once overridden, changes to plan resource will not impact subscription. Any price update will not impact billing cycles within next 10 days (Applicable only for subscriptions funded by PayPal account). Following are the fields eligible for patch. Attribute or object Operations billing_info.outstanding_balance replace custom_id add,replace plan.billing_cycles[@sequence==n]. pricing_scheme.fixed_price add,replace plan.billing_cycles[@sequence==n]. pricing_scheme.tiers replace plan.billing_cycles[@sequence==n]. total_cycles replace plan.payment_preferences. auto_bill_outstanding replace plan.payment_preferences. payment_failure_threshold replace plan.taxes.inclusive add,replace plan.taxes.percentage add,replace shipping_amount add,replace start_time replace subscriber.shipping_address add,replace subscriber.payment_source (for subscriptions funded by card payments) replace.
        /// </summary>
        /// <param name="input">Object containing request parameters.</param>
        /// <param name="cancellationToken"> cancellationToken. </param>
        /// <returns>Returns the void response from the API call.</returns>
        public async Task PatchSubscriptionAsync(
                Models.PatchSubscriptionInput input,
                CancellationToken cancellationToken = default)
            => await CreateApiCall<VoidType>()
              .RequestBuilder(_requestBuilder => _requestBuilder
                  .Setup(new HttpMethod("PATCH"), "/v1/billing/subscriptions/{id}")
                  .WithAuth("Oauth2")
                  .Parameters(_parameters => _parameters
                      .Body(_bodyParameter => _bodyParameter.Setup(input.Body))
                      .Template(_template => _template.Setup("id", input.Id))
                      .Header(_header => _header.Setup("Content-Type", "application/json"))))
              .ResponseHandler(_responseHandler => _responseHandler
                  .ErrorCase("400", CreateErrorCase("Request is not well-formed, syntactically incorrect, or violates schema.", (_reason, _context) => new SubscriptionErrorException(_reason, _context)))
                  .ErrorCase("401", CreateErrorCase("Authentication failed due to missing authorization header, or invalid authentication credentials.", (_reason, _context) => new SubscriptionErrorException(_reason, _context)))
                  .ErrorCase("403", CreateErrorCase("Authorization failed due to insufficient permissions.", (_reason, _context) => new SubscriptionErrorException(_reason, _context)))
                  .ErrorCase("404", CreateErrorCase("The specified resource does not exist.", (_reason, _context) => new SubscriptionErrorException(_reason, _context)))
                  .ErrorCase("422", CreateErrorCase("The requested action could not be performed, semantically incorrect, or failed business validation.", (_reason, _context) => new SubscriptionErrorException(_reason, _context)))
                  .ErrorCase("500", CreateErrorCase("An internal server error has occurred.", (_reason, _context) => new SubscriptionErrorException(_reason, _context)))
                  .ErrorCase("0", CreateErrorCase("The error response.", (_reason, _context) => new SubscriptionErrorException(_reason, _context))))
              .ExecuteAsync(cancellationToken).ConfigureAwait(false);

        /// <summary>
        /// Updates the quantity of the product or service in a subscription. You can also use this method to switch the plan and update the `shipping_amount`, `shipping_address` values for the subscription. This type of update requires the buyer's consent.
        /// </summary>
        /// <param name="input">Object containing request parameters.</param>
        /// <returns>Returns the ApiResponse of Models.ModifySubscriptionResponse response from the API call.</returns>
        public ApiResponse<Models.ModifySubscriptionResponse> ReviseSubscription(
                Models.ReviseSubscriptionInput input)
            => CoreHelper.RunTask(ReviseSubscriptionAsync(input));

        /// <summary>
        /// Updates the quantity of the product or service in a subscription. You can also use this method to switch the plan and update the `shipping_amount`, `shipping_address` values for the subscription. This type of update requires the buyer's consent.
        /// </summary>
        /// <param name="input">Object containing request parameters.</param>
        /// <param name="cancellationToken"> cancellationToken. </param>
        /// <returns>Returns the ApiResponse of Models.ModifySubscriptionResponse response from the API call.</returns>
        public async Task<ApiResponse<Models.ModifySubscriptionResponse>> ReviseSubscriptionAsync(
                Models.ReviseSubscriptionInput input,
                CancellationToken cancellationToken = default)
            => await CreateApiCall<Models.ModifySubscriptionResponse>()
              .RequestBuilder(_requestBuilder => _requestBuilder
                  .Setup(HttpMethod.Post, "/v1/billing/subscriptions/{id}/revise")
                  .WithAuth("Oauth2")
                  .Parameters(_parameters => _parameters
                      .Body(_bodyParameter => _bodyParameter.Setup(input.Body))
                      .Template(_template => _template.Setup("id", input.Id))
                      .Header(_header => _header.Setup("Content-Type", "application/json"))))
              .ResponseHandler(_responseHandler => _responseHandler
                  .ErrorCase("400", CreateErrorCase("Bad Request. Request is not well-formed, syntactically incorrect, or violates schema.", (_reason, _context) => new SubscriptionErrorException(_reason, _context)))
                  .ErrorCase("401", CreateErrorCase("Authentication failed due to missing authorization header, or invalid authentication credentials.", (_reason, _context) => new SubscriptionErrorException(_reason, _context)))
                  .ErrorCase("403", CreateErrorCase("Authorization failed due to insufficient permissions.", (_reason, _context) => new SubscriptionErrorException(_reason, _context)))
                  .ErrorCase("404", CreateErrorCase("The specified resource does not exist.", (_reason, _context) => new SubscriptionErrorException(_reason, _context)))
                  .ErrorCase("422", CreateErrorCase("The requested action could not be performed, semantically incorrect, or failed business validation.", (_reason, _context) => new SubscriptionErrorException(_reason, _context)))
                  .ErrorCase("500", CreateErrorCase("An internal server error has occurred.", (_reason, _context) => new SubscriptionErrorException(_reason, _context)))
                  .ErrorCase("0", CreateErrorCase("The error response.", (_reason, _context) => new SubscriptionErrorException(_reason, _context))))
              .ExecuteAsync(cancellationToken).ConfigureAwait(false);

        /// <summary>
        /// Suspends the subscription.
        /// </summary>
        /// <param name="input">Object containing request parameters.</param>
        public void SuspendSubscription(
                Models.SuspendSubscriptionInput input)
            => CoreHelper.RunVoidTask(SuspendSubscriptionAsync(input));

        /// <summary>
        /// Suspends the subscription.
        /// </summary>
        /// <param name="input">Object containing request parameters.</param>
        /// <param name="cancellationToken"> cancellationToken. </param>
        /// <returns>Returns the void response from the API call.</returns>
        public async Task SuspendSubscriptionAsync(
                Models.SuspendSubscriptionInput input,
                CancellationToken cancellationToken = default)
            => await CreateApiCall<VoidType>()
              .RequestBuilder(_requestBuilder => _requestBuilder
                  .Setup(HttpMethod.Post, "/v1/billing/subscriptions/{id}/suspend")
                  .WithAuth("Oauth2")
                  .Parameters(_parameters => _parameters
                      .Body(_bodyParameter => _bodyParameter.Setup(input.Body))
                      .Template(_template => _template.Setup("id", input.Id))
                      .Header(_header => _header.Setup("Content-Type", "application/json"))))
              .ResponseHandler(_responseHandler => _responseHandler
                  .ErrorCase("400", CreateErrorCase("Bad Request. Request is not well-formed, syntactically incorrect, or violates schema.", (_reason, _context) => new SubscriptionErrorException(_reason, _context)))
                  .ErrorCase("401", CreateErrorCase("Authentication failed due to missing authorization header, or invalid authentication credentials.", (_reason, _context) => new SubscriptionErrorException(_reason, _context)))
                  .ErrorCase("403", CreateErrorCase("Authorization failed due to insufficient permissions.", (_reason, _context) => new SubscriptionErrorException(_reason, _context)))
                  .ErrorCase("404", CreateErrorCase("The specified resource does not exist.", (_reason, _context) => new SubscriptionErrorException(_reason, _context)))
                  .ErrorCase("422", CreateErrorCase("The requested action could not be performed, semantically incorrect, or failed business validation.", (_reason, _context) => new SubscriptionErrorException(_reason, _context)))
                  .ErrorCase("500", CreateErrorCase("An internal server error has occurred.", (_reason, _context) => new SubscriptionErrorException(_reason, _context)))
                  .ErrorCase("0", CreateErrorCase("The error response.", (_reason, _context) => new SubscriptionErrorException(_reason, _context))))
              .ExecuteAsync(cancellationToken).ConfigureAwait(false);

        /// <summary>
        /// Cancels the subscription.
        /// </summary>
        /// <param name="input">Object containing request parameters.</param>
        public void CancelSubscription(
                Models.CancelSubscriptionInput input)
            => CoreHelper.RunVoidTask(CancelSubscriptionAsync(input));

        /// <summary>
        /// Cancels the subscription.
        /// </summary>
        /// <param name="input">Object containing request parameters.</param>
        /// <param name="cancellationToken"> cancellationToken. </param>
        /// <returns>Returns the void response from the API call.</returns>
        public async Task CancelSubscriptionAsync(
                Models.CancelSubscriptionInput input,
                CancellationToken cancellationToken = default)
            => await CreateApiCall<VoidType>()
              .RequestBuilder(_requestBuilder => _requestBuilder
                  .Setup(HttpMethod.Post, "/v1/billing/subscriptions/{id}/cancel")
                  .WithAuth("Oauth2")
                  .Parameters(_parameters => _parameters
                      .Body(_bodyParameter => _bodyParameter.Setup(input.Body))
                      .Template(_template => _template.Setup("id", input.Id))
                      .Header(_header => _header.Setup("Content-Type", "application/json"))))
              .ResponseHandler(_responseHandler => _responseHandler
                  .ErrorCase("400", CreateErrorCase("Bad Request. Request is not well-formed, syntactically incorrect, or violates schema.", (_reason, _context) => new SubscriptionErrorException(_reason, _context)))
                  .ErrorCase("401", CreateErrorCase("Authentication failed due to missing authorization header, or invalid authentication credentials.", (_reason, _context) => new SubscriptionErrorException(_reason, _context)))
                  .ErrorCase("403", CreateErrorCase("Authorization failed due to insufficient permissions.", (_reason, _context) => new SubscriptionErrorException(_reason, _context)))
                  .ErrorCase("404", CreateErrorCase("The specified resource does not exist.", (_reason, _context) => new SubscriptionErrorException(_reason, _context)))
                  .ErrorCase("422", CreateErrorCase("The requested action could not be performed, semantically incorrect, or failed business validation.", (_reason, _context) => new SubscriptionErrorException(_reason, _context)))
                  .ErrorCase("500", CreateErrorCase("An internal server error has occurred.", (_reason, _context) => new SubscriptionErrorException(_reason, _context)))
                  .ErrorCase("0", CreateErrorCase("The error response.", (_reason, _context) => new SubscriptionErrorException(_reason, _context))))
              .ExecuteAsync(cancellationToken).ConfigureAwait(false);

        /// <summary>
        /// Activates the subscription.
        /// </summary>
        /// <param name="input">Object containing request parameters.</param>
        public void ActivateSubscription(
                Models.ActivateSubscriptionInput input)
            => CoreHelper.RunVoidTask(ActivateSubscriptionAsync(input));

        /// <summary>
        /// Activates the subscription.
        /// </summary>
        /// <param name="input">Object containing request parameters.</param>
        /// <param name="cancellationToken"> cancellationToken. </param>
        /// <returns>Returns the void response from the API call.</returns>
        public async Task ActivateSubscriptionAsync(
                Models.ActivateSubscriptionInput input,
                CancellationToken cancellationToken = default)
            => await CreateApiCall<VoidType>()
              .RequestBuilder(_requestBuilder => _requestBuilder
                  .Setup(HttpMethod.Post, "/v1/billing/subscriptions/{id}/activate")
                  .WithAuth("Oauth2")
                  .Parameters(_parameters => _parameters
                      .Body(_bodyParameter => _bodyParameter.Setup(input.Body))
                      .Template(_template => _template.Setup("id", input.Id))
                      .Header(_header => _header.Setup("Content-Type", "application/json"))))
              .ResponseHandler(_responseHandler => _responseHandler
                  .ErrorCase("400", CreateErrorCase("Bad Request. Request is not well-formed, syntactically incorrect, or violates schema.", (_reason, _context) => new SubscriptionErrorException(_reason, _context)))
                  .ErrorCase("401", CreateErrorCase("Authentication failed due to missing authorization header, or invalid authentication credentials.", (_reason, _context) => new SubscriptionErrorException(_reason, _context)))
                  .ErrorCase("403", CreateErrorCase("Authorization failed due to insufficient permissions.", (_reason, _context) => new SubscriptionErrorException(_reason, _context)))
                  .ErrorCase("404", CreateErrorCase("The specified resource does not exist.", (_reason, _context) => new SubscriptionErrorException(_reason, _context)))
                  .ErrorCase("422", CreateErrorCase("The requested action could not be performed, semantically incorrect, or failed business validation.", (_reason, _context) => new SubscriptionErrorException(_reason, _context)))
                  .ErrorCase("500", CreateErrorCase("An internal server error has occurred.", (_reason, _context) => new SubscriptionErrorException(_reason, _context)))
                  .ErrorCase("0", CreateErrorCase("The error response.", (_reason, _context) => new SubscriptionErrorException(_reason, _context))))
              .ExecuteAsync(cancellationToken).ConfigureAwait(false);

        /// <summary>
        /// Captures an authorized payment from the subscriber on the subscription.
        /// </summary>
        /// <param name="input">Object containing request parameters.</param>
        /// <returns>Returns the ApiResponse of Models.SubscriptionTransactionDetails response from the API call.</returns>
        public ApiResponse<Models.SubscriptionTransactionDetails> CaptureSubscription(
                Models.CaptureSubscriptionInput input)
            => CoreHelper.RunTask(CaptureSubscriptionAsync(input));

        /// <summary>
        /// Captures an authorized payment from the subscriber on the subscription.
        /// </summary>
        /// <param name="input">Object containing request parameters.</param>
        /// <param name="cancellationToken"> cancellationToken. </param>
        /// <returns>Returns the ApiResponse of Models.SubscriptionTransactionDetails response from the API call.</returns>
        public async Task<ApiResponse<Models.SubscriptionTransactionDetails>> CaptureSubscriptionAsync(
                Models.CaptureSubscriptionInput input,
                CancellationToken cancellationToken = default)
            => await CreateApiCall<Models.SubscriptionTransactionDetails>()
              .RequestBuilder(_requestBuilder => _requestBuilder
                  .Setup(HttpMethod.Post, "/v1/billing/subscriptions/{id}/capture")
                  .WithAuth("Oauth2")
                  .Parameters(_parameters => _parameters
                      .Body(_bodyParameter => _bodyParameter.Setup(input.Body))
                      .Template(_template => _template.Setup("id", input.Id))
                      .Header(_header => _header.Setup("Content-Type", "application/json"))
                      .Header(_header => _header.Setup("PayPal-Request-Id", input.PaypalRequestId))))
              .ResponseHandler(_responseHandler => _responseHandler
                  .ErrorCase("400", CreateErrorCase("Bad Request. Request is not well-formed, syntactically incorrect, or violates schema.", (_reason, _context) => new SubscriptionErrorException(_reason, _context)))
                  .ErrorCase("401", CreateErrorCase("Authentication failed due to missing authorization header, or invalid authentication credentials.", (_reason, _context) => new SubscriptionErrorException(_reason, _context)))
                  .ErrorCase("403", CreateErrorCase("Authorization failed due to insufficient permissions.", (_reason, _context) => new SubscriptionErrorException(_reason, _context)))
                  .ErrorCase("404", CreateErrorCase("The specified resource does not exist.", (_reason, _context) => new SubscriptionErrorException(_reason, _context)))
                  .ErrorCase("422", CreateErrorCase("The requested action could not be performed, semantically incorrect, or failed business validation.", (_reason, _context) => new SubscriptionErrorException(_reason, _context)))
                  .ErrorCase("500", CreateErrorCase("An internal server error has occurred.", (_reason, _context) => new SubscriptionErrorException(_reason, _context)))
                  .ErrorCase("0", CreateErrorCase("The error response.", (_reason, _context) => new SubscriptionErrorException(_reason, _context))))
              .ExecuteAsync(cancellationToken).ConfigureAwait(false);

        /// <summary>
        /// Lists transactions for a subscription.
        /// </summary>
        /// <param name="input">Object containing request parameters.</param>
        /// <returns>Returns the ApiResponse of Models.TransactionsList response from the API call.</returns>
        public ApiResponse<Models.TransactionsList> ListSubscriptionTransactions(
                Models.ListSubscriptionTransactionsInput input)
            => CoreHelper.RunTask(ListSubscriptionTransactionsAsync(input));

        /// <summary>
        /// Lists transactions for a subscription.
        /// </summary>
        /// <param name="input">Object containing request parameters.</param>
        /// <param name="cancellationToken"> cancellationToken. </param>
        /// <returns>Returns the ApiResponse of Models.TransactionsList response from the API call.</returns>
        public async Task<ApiResponse<Models.TransactionsList>> ListSubscriptionTransactionsAsync(
                Models.ListSubscriptionTransactionsInput input,
                CancellationToken cancellationToken = default)
            => await CreateApiCall<Models.TransactionsList>()
              .RequestBuilder(_requestBuilder => _requestBuilder
                  .Setup(HttpMethod.Get, "/v1/billing/subscriptions/{id}/transactions")
                  .WithAuth("Oauth2")
                  .Parameters(_parameters => _parameters
                      .Template(_template => _template.Setup("id", input.Id))
                      .Query(_query => _query.Setup("start_time", input.StartTime))
                      .Query(_query => _query.Setup("end_time", input.EndTime))))
              .ResponseHandler(_responseHandler => _responseHandler
                  .ErrorCase("400", CreateErrorCase("Bad Request. Request is not well-formed, syntactically incorrect, or violates schema.", (_reason, _context) => new SubscriptionErrorException(_reason, _context)))
                  .ErrorCase("401", CreateErrorCase("Authentication failed due to missing authorization header, or invalid authentication credentials.", (_reason, _context) => new SubscriptionErrorException(_reason, _context)))
                  .ErrorCase("403", CreateErrorCase("Authorization failed due to insufficient permissions.", (_reason, _context) => new SubscriptionErrorException(_reason, _context)))
                  .ErrorCase("404", CreateErrorCase("The specified resource does not exist.", (_reason, _context) => new SubscriptionErrorException(_reason, _context)))
                  .ErrorCase("500", CreateErrorCase("An internal server error has occurred.", (_reason, _context) => new SubscriptionErrorException(_reason, _context)))
                  .ErrorCase("0", CreateErrorCase("The error response.", (_reason, _context) => new SubscriptionErrorException(_reason, _context))))
              .ExecuteAsync(cancellationToken).ConfigureAwait(false);
    }
}